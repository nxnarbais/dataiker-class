api_key: ${DD_API_KEY}

# Datadog site configuration
site: datadoghq.com

# Logs configuration
logs_config:
  processing_rules:
    - type: "mask_sequences"
      name: "mask_user_data"
      replace_placeholder: "***"
      pattern: "password=\\w+"

# APM configuration
apm_config:
  enabled: true
  apm_non_local_traffic: true

# Process agent configuration
process_config:
  enabled: true
  process_collection:
    enabled: true

# OpenMetrics integration configuration
instances:
  - openmetrics_endpoint: http://openmetrics-app:3000/metrics
    namespace: openmetrics_app
    metrics:
      - http_requests_total
      - http_request_duration_seconds
      - active_connections
      - custom_operations_total
      - memory_usage_bytes
    tags:
      - "service:openmetrics-app"
      - "env:development"
    send_distribution_buckets: true
    send_distribution_counts_as_monotonic: true
    send_histograms_buckets: true

# Additional integrations
integrations:
  nginx:
    - nginx_status_url: http://nginx:80/nginx_status
  redis:
    - host: redis
      port: 6379 